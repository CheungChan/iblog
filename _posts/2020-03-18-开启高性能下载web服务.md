---
title: å¼€å¯é«˜æ€§èƒ½ä¸‹è½½webæœåŠ¡
key: high_downlaod
layout: article
date: '2020-03-18 18:45:00'
tags:  python
typora-root-url: ../../iblog
---

# é‡è¦æ›´æ–°è§æœ€ä¸‹å¤´ï¼ï¼ï¼

#### é—®é¢˜

æƒ³é«˜æ€§èƒ½ä¼ è¾“æ–‡ä»¶, å®‰è£…äº†python3.6ä»¥ä¸Š, å¦‚æœèƒ½å¼€å¯ä¸€ä¸ªé«˜æ€§èƒ½çš„webæ¥ä¼ è¾“æ–‡ä»¶å°±å¥½äº†

#### æ­¥éª¤

å®‰è£…python3

å®‰è£…ä¾èµ– <code> pip3 install fastapi aiofiles uvicorn</code>

ç¼–å†™web.pyä¿å­˜

è®¿é—® <a href="http://127.0.0.1:8002/d/files.txt">http://127.0.0.1:8002/d/files.txt</a>  å³å¯

```python
# save in web.py
# python >= 3.6
# pip install aiofiles fastapi uvicorn
import os

import uvicorn
from fastapi import FastAPI, HTTPException
from fastapi.responses import FileResponse



app = FastAPI()

@app.get("/d/{p:path}")
async def download(p: str):
    if not os.path.exists(p):
        raise HTTPException(status_code=404, detail={"reason": f"{p}ä¸å­˜åœ¨","dir": os.path.abspath('.'), "files": os.listdir()})
    if not os.path.isfile(p):
        raise HTTPException(status_code=400, detail={"reason": f"{p}ä¸æ˜¯æ–‡ä»¶", "dir": os.path.abspath(p), "files": os.listdir(p)})
    return FileResponse(p)
if __name__ == '__main__':
    uvicorn.run("web:app", host='0.0.0.0', port=8002, reload=True)
```

# 2021.09.26æ›´æ–°ï¼ï¼ï¼

æˆ‘ç”¨goå®ç°çš„æ¯”è¾ƒç®€é™‹ï¼Œç°åœ¨å·²ç»æœ‰äº†æ›´å¥½çš„å®ç°ï¼Œæ˜¯ç”¨rustå®ç°çš„ï¼Œæ€§èƒ½æ›´å¥½ï¼ŒåŒ…åˆå°ï¼ŒåŠŸèƒ½è¿˜æ›´å…¨ã€‚å¼ºçƒˆæ¨èï¼š

[svenstaro/miniserve: ğŸŒŸ For when you really just want to serve some files over HTTP right now! (github.com)](https://github.com/svenstaro/miniserve)

æ¬¡åšå®¢ä»ç„¶ä¿ç•™ï¼Œä»…åšå­¦ä¹ äº¤æµä½¿ç”¨ï¼Œå®é™…ä½¿ç”¨æ›´æ¨è`miniserve`
